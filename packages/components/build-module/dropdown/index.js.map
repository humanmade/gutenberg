{"version":3,"sources":["/home/circleci/project/packages/components/src/dropdown/index.js"],"names":["deprecated","Component","createRef","Popover","Dropdown","arguments","toggle","bind","close","closeIfClickOutside","refresh","containerRef","state","isOpen","onToggle","props","prevProps","prevState","plugin","version","hint","setState","event","current","contains","target","renderContent","renderToggle","position","className","contentClassName","expandOnMobile","headerTitle","args","onClose"],"mappings":"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","sourcesContent":["/**\n * WordPress dependencies\n */\nimport deprecated from '@wordpress/deprecated';\nimport { Component, createRef } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport Popover from '../popover';\n\nclass Dropdown extends Component {\n\tconstructor() {\n\t\tsuper( ...arguments );\n\n\t\tthis.toggle = this.toggle.bind( this );\n\t\tthis.close = this.close.bind( this );\n\t\tthis.closeIfClickOutside = this.closeIfClickOutside.bind( this );\n\t\tthis.refresh = this.refresh.bind( this );\n\n\t\tthis.containerRef = createRef();\n\n\t\tthis.state = {\n\t\t\tisOpen: false,\n\t\t};\n\t}\n\n\tcomponentWillUnmount() {\n\t\tconst { isOpen } = this.state;\n\t\tconst { onToggle } = this.props;\n\t\tif ( isOpen && onToggle ) {\n\t\t\tonToggle( false );\n\t\t}\n\t}\n\n\tcomponentDidUpdate( prevProps, prevState ) {\n\t\tconst { isOpen } = this.state;\n\t\tconst { onToggle } = this.props;\n\t\tif ( prevState.isOpen !== isOpen && onToggle ) {\n\t\t\tonToggle( isOpen );\n\t\t}\n\t}\n\n\t/**\n\t * When contents change height due to user interaction,\n\t * `refresh` can be called to re-render Popover with correct\n\t * attributes which allow scroll, if need be.\n\t * @deprecated\n\t */\n\trefresh() {\n\t\tdeprecated( 'Dropdown.refresh()', {\n\t\t\tplugin: 'Gutenberg',\n\t\t\tversion: '4.5',\n\t\t\thint: 'Popover is now automatically re-rendered without needing to execute \"refresh\"',\n\t\t} );\n\t}\n\n\ttoggle() {\n\t\tthis.setState( ( state ) => ( {\n\t\t\tisOpen: ! state.isOpen,\n\t\t} ) );\n\t}\n\n\t/**\n\t * Closes the dropdown if a click occurs outside the dropdown wrapper. This\n\t * is intentionally distinct from `onClose` in that a click outside the\n\t * popover may occur in the toggling of the dropdown via its toggle button.\n\t * The correct behavior is to keep the dropdown closed.\n\t *\n\t * @param {MouseEvent} event Click event triggering `onClickOutside`.\n\t */\n\tcloseIfClickOutside( event ) {\n\t\tif ( ! this.containerRef.current.contains( event.target ) ) {\n\t\t\tthis.close();\n\t\t}\n\t}\n\n\tclose() {\n\t\tthis.setState( { isOpen: false } );\n\t}\n\n\trender() {\n\t\tconst { isOpen } = this.state;\n\t\tconst {\n\t\t\trenderContent,\n\t\t\trenderToggle,\n\t\t\tposition = 'bottom',\n\t\t\tclassName,\n\t\t\tcontentClassName,\n\t\t\texpandOnMobile,\n\t\t\theaderTitle,\n\t\t} = this.props;\n\n\t\tconst args = { isOpen, onToggle: this.toggle, onClose: this.close };\n\n\t\treturn (\n\t\t\t<div className={ className } ref={ this.containerRef }>\n\t\t\t\t{ renderToggle( args ) }\n\t\t\t\t{ isOpen && (\n\t\t\t\t\t<Popover\n\t\t\t\t\t\tclassName={ contentClassName }\n\t\t\t\t\t\tposition={ position }\n\t\t\t\t\t\tonClose={ this.close }\n\t\t\t\t\t\tonClickOutside={ this.closeIfClickOutside }\n\t\t\t\t\t\texpandOnMobile={ expandOnMobile }\n\t\t\t\t\t\theaderTitle={ headerTitle }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ renderContent( args ) }\n\t\t\t\t\t</Popover>\n\t\t\t\t) }\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default Dropdown;\n"]}