{"version":3,"sources":["/home/circleci/project/packages/block-library/src/media-text/index.js"],"names":["DEFAULT_MEDIA_WIDTH","name","settings","title","description","icon","category","keywords","attributes","align","type","default","backgroundColor","customBackgroundColor","mediaAlt","source","selector","attribute","mediaPosition","mediaId","mediaUrl","mediaType","mediaWidth","isStackedOnMobile","supports","transforms","from","blocks","transform","alt","url","id","src","to","isMatch","edit","save","mediaTypeRenders","image","video","backgroundClass","className","gridTemplateColumns","style","undefined","noop"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport { noop } from 'lodash';\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { Path, SVG } from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\nimport {\n\tInnerBlocks,\n\tgetColorClassName,\n} from '@wordpress/editor';\nimport { createBlock } from '@wordpress/blocks';\n\n/**\n * Internal dependencies\n */\nimport edit from './edit';\n\nconst DEFAULT_MEDIA_WIDTH = 50;\n\nexport const name = 'core/media-text';\n\nexport const settings = {\n\ttitle: __( 'Media & Text' ),\n\n\tdescription: __( 'Set media and words side-by-side media for a richer layout.' ),\n\n\ticon: <SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><Path d=\"M13 17h8v-2h-8v2zM3 19h8V5H3v14zM13 9h8V7h-8v2zm0 4h8v-2h-8v2z\" /></SVG>,\n\n\tcategory: 'layout',\n\n\tkeywords: [ __( 'image' ), __( 'video' ) ],\n\n\tattributes: {\n\t\talign: {\n\t\t\ttype: 'string',\n\t\t\tdefault: 'wide',\n\t\t},\n\t\tbackgroundColor: {\n\t\t\ttype: 'string',\n\t\t},\n\t\tcustomBackgroundColor: {\n\t\t\ttype: 'string',\n\t\t},\n\t\tmediaAlt: {\n\t\t\ttype: 'string',\n\t\t\tsource: 'attribute',\n\t\t\tselector: 'figure img',\n\t\t\tattribute: 'alt',\n\t\t\tdefault: '',\n\t\t},\n\t\tmediaPosition: {\n\t\t\ttype: 'string',\n\t\t\tdefault: 'left',\n\t\t},\n\t\tmediaId: {\n\t\t\ttype: 'number',\n\t\t},\n\t\tmediaUrl: {\n\t\t\ttype: 'string',\n\t\t\tsource: 'attribute',\n\t\t\tselector: 'figure video,figure img',\n\t\t\tattribute: 'src',\n\t\t},\n\t\tmediaType: {\n\t\t\ttype: 'string',\n\t\t},\n\t\tmediaWidth: {\n\t\t\ttype: 'number',\n\t\t\tdefault: 50,\n\t\t},\n\t\tisStackedOnMobile: {\n\t\t\ttype: 'boolean',\n\t\t\tdefault: false,\n\t\t},\n\t},\n\n\tsupports: {\n\t\talign: [ 'wide', 'full' ],\n\t},\n\n\ttransforms: {\n\t\tfrom: [\n\t\t\t{\n\t\t\t\ttype: 'block',\n\t\t\t\tblocks: [ 'core/image' ],\n\t\t\t\ttransform: ( { alt, url, id } ) => (\n\t\t\t\t\tcreateBlock( 'core/media-text', {\n\t\t\t\t\t\tmediaAlt: alt,\n\t\t\t\t\t\tmediaId: id,\n\t\t\t\t\t\tmediaUrl: url,\n\t\t\t\t\t\tmediaType: 'image',\n\t\t\t\t\t} )\n\t\t\t\t),\n\t\t\t},\n\t\t\t{\n\t\t\t\ttype: 'block',\n\t\t\t\tblocks: [ 'core/video' ],\n\t\t\t\ttransform: ( { src, id } ) => (\n\t\t\t\t\tcreateBlock( 'core/media-text', {\n\t\t\t\t\t\tmediaId: id,\n\t\t\t\t\t\tmediaUrl: src,\n\t\t\t\t\t\tmediaType: 'video',\n\t\t\t\t\t} )\n\t\t\t\t),\n\t\t\t},\n\t\t],\n\t\tto: [\n\t\t\t{\n\t\t\t\ttype: 'block',\n\t\t\t\tblocks: [ 'core/image' ],\n\t\t\t\tisMatch: ( { mediaType, mediaUrl } ) => {\n\t\t\t\t\treturn ! mediaUrl || mediaType === 'image';\n\t\t\t\t},\n\t\t\t\ttransform: ( { mediaAlt, mediaId, mediaUrl } ) => {\n\t\t\t\t\treturn createBlock( 'core/image', {\n\t\t\t\t\t\talt: mediaAlt,\n\t\t\t\t\t\tid: mediaId,\n\t\t\t\t\t\turl: mediaUrl,\n\t\t\t\t\t} );\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\ttype: 'block',\n\t\t\t\tblocks: [ 'core/video' ],\n\t\t\t\tisMatch: ( { mediaType, mediaUrl } ) => {\n\t\t\t\t\treturn ! mediaUrl || mediaType === 'video';\n\t\t\t\t},\n\t\t\t\ttransform: ( { mediaId, mediaUrl } ) => {\n\t\t\t\t\treturn createBlock( 'core/video', {\n\t\t\t\t\t\tid: mediaId,\n\t\t\t\t\t\tsrc: mediaUrl,\n\t\t\t\t\t} );\n\t\t\t\t},\n\t\t\t},\n\t\t],\n\t},\n\n\tedit,\n\n\tsave( { attributes } ) {\n\t\tconst {\n\t\t\tbackgroundColor,\n\t\t\tcustomBackgroundColor,\n\t\t\tisStackedOnMobile,\n\t\t\tmediaAlt,\n\t\t\tmediaPosition,\n\t\t\tmediaType,\n\t\t\tmediaUrl,\n\t\t\tmediaWidth,\n\t\t} = attributes;\n\t\tconst mediaTypeRenders = {\n\t\t\timage: () => <img src={ mediaUrl } alt={ mediaAlt } />,\n\t\t\tvideo: () => <video controls src={ mediaUrl } />,\n\t\t};\n\n\t\tconst backgroundClass = getColorClassName( 'background-color', backgroundColor );\n\t\tconst className = classnames( {\n\t\t\t'has-media-on-the-right': 'right' === mediaPosition,\n\t\t\t[ backgroundClass ]: backgroundClass,\n\t\t\t'is-stacked-on-mobile': isStackedOnMobile,\n\t\t} );\n\n\t\tlet gridTemplateColumns;\n\t\tif ( mediaWidth !== DEFAULT_MEDIA_WIDTH ) {\n\t\t\tgridTemplateColumns = 'right' === mediaPosition ? `auto ${ mediaWidth }%` : `${ mediaWidth }% auto`;\n\t\t}\n\t\tconst style = {\n\t\t\tbackgroundColor: backgroundClass ? undefined : customBackgroundColor,\n\t\t\tgridTemplateColumns,\n\t\t};\n\t\treturn (\n\t\t\t<div className={ className } style={ style }>\n\t\t\t\t<figure className=\"wp-block-media-text__media\" >\n\t\t\t\t\t{ ( mediaTypeRenders[ mediaType ] || noop )() }\n\t\t\t\t</figure>\n\t\t\t\t<div className=\"wp-block-media-text__content\">\n\t\t\t\t\t<InnerBlocks.Content />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t},\n};\n"]}