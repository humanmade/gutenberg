{"version":3,"sources":["/home/circleci/project/packages/block-library/src/image/edit.native.js"],"names":["View","Image","TextInput","RNReactNativeGutenbergBridge","MediaPlaceholder","RichText","ImageEdit","props","attributes","isSelected","setAttributes","url","caption","onUploadPress","onMediaLibraryPress","mediaUrl","flex","width","height","uri","isEmpty","padding","textAlign","newCaption"],"mappings":";;AAAA;;;AAGA,SAASA,IAAT,EAAeC,KAAf,EAAsBC,SAAtB,QAAuC,cAAvC;AACA,OAAOC,4BAAP,MAAyC,+BAAzC;AAEA;;;;AAGA,SAASC,gBAAT,EAA2BC,QAA3B,QAA2C,mBAA3C;AAEA,eAAe,SAASC,SAAT,CAAoBC,KAApB,EAA4B;AAAA,MAClCC,UADkC,GACQD,KADR,CAClCC,UADkC;AAAA,MACtBC,UADsB,GACQF,KADR,CACtBE,UADsB;AAAA,MACVC,aADU,GACQH,KADR,CACVG,aADU;AAAA,MAElCC,GAFkC,GAEjBH,UAFiB,CAElCG,GAFkC;AAAA,MAE7BC,OAF6B,GAEjBJ,UAFiB,CAE7BI,OAF6B;;AAI1C,MAAMC,aAAa,GAAG,SAAhBA,aAAgB,GAAM,CAC3B;AACA;AACA;AACA,GAJD;;AAMA,MAAMC,mBAAmB,GAAG,SAAtBA,mBAAsB,GAAM;AACjC;AACA;AACAX,IAAAA,4BAA4B,CAACW,mBAA7B,CAAkD,UAAEC,QAAF,EAAgB;AACjE,UAAKA,QAAL,EAAgB;AACfL,QAAAA,aAAa,CAAE;AAAEC,UAAAA,GAAG,EAAEI;AAAP,SAAF,CAAb;AACA;AACD,KAJD;AAKA,GARD;;AAUA,MAAK,CAAEJ,GAAP,EAAa;AACZ,WACC,cAAC,gBAAD;AACC,MAAA,aAAa,EAAGE,aADjB;AAEC,MAAA,mBAAmB,EAAGC;AAFvB,MADD;AAMA;;AAED,SACC,cAAC,IAAD;AAAM,IAAA,KAAK,EAAG;AAAEE,MAAAA,IAAI,EAAE;AAAR;AAAd,KACC,cAAC,KAAD;AACC,IAAA,KAAK,EAAG;AAAEC,MAAAA,KAAK,EAAE,MAAT;AAAiBC,MAAAA,MAAM,EAAE;AAAzB,KADT;AAEC,IAAA,YAAY,EAAC,OAFd;AAGC,IAAA,MAAM,EAAG;AAAEC,MAAAA,GAAG,EAAER;AAAP;AAHV,IADD,EAMG,CAAE,CAAEN,QAAQ,CAACe,OAAT,CAAkBR,OAAlB,CAAF,GAAgC,CAAhC,IAAqCH,UAAvC,KACD,cAAC,IAAD;AAAM,IAAA,KAAK,EAAG;AAAEY,MAAAA,OAAO,EAAE,EAAX;AAAeL,MAAAA,IAAI,EAAE;AAArB;AAAd,KACC,cAAC,SAAD;AACC,IAAA,KAAK,EAAG;AAAEM,MAAAA,SAAS,EAAE;AAAb,KADT;AAEC,IAAA,qBAAqB,EAAC,aAFvB;AAGC,IAAA,KAAK,EAAGV,OAHT;AAIC,IAAA,WAAW,EAAG,gBAJf;AAKC,IAAA,YAAY,EAAG,sBAAEW,UAAF;AAAA,aAAkBb,aAAa,CAAE;AAAEE,QAAAA,OAAO,EAAEW;AAAX,OAAF,CAA/B;AAAA;AALhB,IADD,CAPF,CADD;AAoBA","sourcesContent":["/**\n * External dependencies\n */\nimport { View, Image, TextInput } from 'react-native';\nimport RNReactNativeGutenbergBridge from 'react-native-gutenberg-bridge';\n\n/**\n * Internal dependencies\n */\nimport { MediaPlaceholder, RichText } from '@wordpress/editor';\n\nexport default function ImageEdit( props ) {\n\tconst { attributes, isSelected, setAttributes } = props;\n\tconst { url, caption } = attributes;\n\n\tconst onUploadPress = () => {\n\t\t// This method should present an image picker from\n\t\t// the device.\n\t\t//TODO: Implement upload image method.\n\t};\n\n\tconst onMediaLibraryPress = () => {\n\t\t// Call onMediaLibraryPress from the Native<->RN bridge. It should trigger an image picker from\n\t\t// the WordPress media library and call the provided callback to set the image URL.\n\t\tRNReactNativeGutenbergBridge.onMediaLibraryPress( ( mediaUrl ) => {\n\t\t\tif ( mediaUrl ) {\n\t\t\t\tsetAttributes( { url: mediaUrl } );\n\t\t\t}\n\t\t} );\n\t};\n\n\tif ( ! url ) {\n\t\treturn (\n\t\t\t<MediaPlaceholder\n\t\t\t\tonUploadPress={ onUploadPress }\n\t\t\t\tonMediaLibraryPress={ onMediaLibraryPress }\n\t\t\t/>\n\t\t);\n\t}\n\n\treturn (\n\t\t<View style={ { flex: 1 } }>\n\t\t\t<Image\n\t\t\t\tstyle={ { width: '100%', height: 200 } }\n\t\t\t\tresizeMethod=\"scale\"\n\t\t\t\tsource={ { uri: url } }\n\t\t\t/>\n\t\t\t{ ( ! RichText.isEmpty( caption ) > 0 || isSelected ) && (\n\t\t\t\t<View style={ { padding: 12, flex: 1 } }>\n\t\t\t\t\t<TextInput\n\t\t\t\t\t\tstyle={ { textAlign: 'center' } }\n\t\t\t\t\t\tunderlineColorAndroid=\"transparent\"\n\t\t\t\t\t\tvalue={ caption }\n\t\t\t\t\t\tplaceholder={ 'Write captionâ€¦' }\n\t\t\t\t\t\tonChangeText={ ( newCaption ) => setAttributes( { caption: newCaption } ) }\n\t\t\t\t\t/>\n\t\t\t\t</View>\n\t\t\t) }\n\t\t</View>\n\t);\n}\n"]}