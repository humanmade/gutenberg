{"version":3,"sources":["/home/circleci/project/packages/format-library/src/image/index.js"],"names":["ALLOWED_MEDIA_TYPES","name","image","title","keywords","object","tagName","className","attributes","style","url","alt","edit","arguments","openModal","bind","closeModal","state","modal","setState","props","value","onChange","id","width","type","Math","min","open","Component"],"mappings":"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","sourcesContent":["/**\n * WordPress dependencies\n */\nimport { Path, SVG } from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\nimport { Fragment, Component } from '@wordpress/element';\nimport { insertObject } from '@wordpress/rich-text';\nimport { MediaUpload, RichTextInserterItem } from '@wordpress/editor';\n\nconst ALLOWED_MEDIA_TYPES = [ 'image' ];\n\nconst name = 'core/image';\n\nexport const image = {\n\tname,\n\ttitle: __( 'Image' ),\n\tkeywords: [ __( 'photo' ), __( 'media' ) ],\n\tobject: true,\n\ttagName: 'img',\n\tclassName: null,\n\tattributes: {\n\t\tclassName: 'class',\n\t\tstyle: 'style',\n\t\turl: 'src',\n\t\talt: 'alt',\n\t},\n\tedit: class ImageEdit extends Component {\n\t\tconstructor() {\n\t\t\tsuper( ...arguments );\n\t\t\tthis.openModal = this.openModal.bind( this );\n\t\t\tthis.closeModal = this.closeModal.bind( this );\n\t\t\tthis.state = {\n\t\t\t\tmodal: false,\n\t\t\t};\n\t\t}\n\n\t\topenModal() {\n\t\t\tthis.setState( { modal: true } );\n\t\t}\n\n\t\tcloseModal() {\n\t\t\tthis.setState( { modal: false } );\n\t\t}\n\n\t\trender() {\n\t\t\tconst { value, onChange } = this.props;\n\n\t\t\treturn (\n\t\t\t\t<Fragment>\n\t\t\t\t\t<RichTextInserterItem\n\t\t\t\t\t\tname={ name }\n\t\t\t\t\t\ticon={ <SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><Path d=\"M4 16h10c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2H4c-1.1 0-2 .9-2 2v9c0 1.1.9 2 2 2zM4 5h10v9H4V5zm14 9v2h4v-2h-4zM2 20h20v-2H2v2zm6.4-8.8L7 9.4 5 12h8l-2.6-3.4-2 2.6z\" /></SVG> }\n\t\t\t\t\t\ttitle={ __( 'Inline Image' ) }\n\t\t\t\t\t\tonClick={ this.openModal }\n\t\t\t\t\t/>\n\t\t\t\t\t{ this.state.modal && <MediaUpload\n\t\t\t\t\t\tallowedTypes={ ALLOWED_MEDIA_TYPES }\n\t\t\t\t\t\tonSelect={ ( { id, url, alt, width } ) => {\n\t\t\t\t\t\t\tthis.closeModal();\n\t\t\t\t\t\t\tonChange( insertObject( value, {\n\t\t\t\t\t\t\t\ttype: name,\n\t\t\t\t\t\t\t\tattributes: {\n\t\t\t\t\t\t\t\t\tclassName: `wp-image-${ id }`,\n\t\t\t\t\t\t\t\t\tstyle: `width: ${ Math.min( width, 150 ) }px;`,\n\t\t\t\t\t\t\t\t\turl,\n\t\t\t\t\t\t\t\t\talt,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t} ) );\n\t\t\t\t\t\t} }\n\t\t\t\t\t\tonClose={ this.closeModal }\n\t\t\t\t\t\trender={ ( { open } ) => {\n\t\t\t\t\t\t\topen();\n\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t} }\n\t\t\t\t\t/> }\n\t\t\t\t</Fragment>\n\t\t\t);\n\t\t}\n\t},\n};\n"]}